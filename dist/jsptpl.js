!function(){var n=function(n,t){var e=[],i=0,r=function(){};r.prototype={c:"",po:0,pnode:null,findEnd:function(n){var s=n.indexOf("<"+t),o=n.indexOf("</"+t),p=n.indexOf("<"+t,n.indexOf("<"+t)+1),h=n.indexOf("</"+t,n.indexOf("</"+t)+1),f=new r;if(s>=0&&o>s){if(null!=this.pnode&&s>0){var u=n.substring(0,s);this.pnode.append(u)}if(p>0&&o>p){var l=n.substring(s,p),a=n.substring(p);f.pnode=this,f.po=this.po+1,this.s=i+s,i+=p,this.append(l),f.findEnd(a)}else{var l=n.substring(s,o+t.length+3),a=n.substring(o+t.length+3);this.s=i+s,i+=o+t.length+3,this.e=i,this.append(l),null!=this.pnode&&(f.pnode=this.pnode,f.po=this.po);var d={p:this.po,c:this.c,s:this.s,e:this.e};e.push(d),f.findEnd(a)}}else if(o>=0&&0>s||s>o){var l=n.substring(0,o+t.length+3),a=n.substring(o+t.length+3);i+=o+t.length+3,this.append(l),this.pnode.e=i;var d={p:this.pnode.po,c:this.pnode.c,e:this.pnode.e,s:this.pnode.s};e.push(d),h>0&&(s>h||0>s)?null!=this.pnode&&this.pnode.findEnd(a):s>0&&(0>h||h>s)&&null!=this.pnode&&(f.pnode=this.pnode.pnode,f.po=this.pnode.po,this.pnode=f,f.findEnd(a))}return""},append:function(n){this.c=this.c+n,null!=this.pnode&&this.pnode.append(n)}};var s=new r;s.findEnd(n);for(var o=0;o<e.length;o++);return e},t=function(n){function t(n,s,o){var p=e(n,s,o);if(i.push(n[p]),p>s&&r.push(p),p>s)t(n,s,p);else{for(1>=o-s?(s=r[r.length-1]+1,r.pop(),o=r[r.length-1]):s+=1;s>=o;)s=o+1,r.pop(),o=r[r.length-1];0!=r.length&&t(n,s,o)}}function e(n,t,e){if(null==n[t])return 0;for(var i=n[t].p,r=t,s=t;e>s;s++)n[s].p<i&&(i=n[s].p,r=s);return r}if(null==n||0==n.length)return[];var i=[],r=[];return r.push(n.length),t(n,0,n.length),i};String.prototype.tagsearcha=function(e,i){var r=n(this,e)||[],s=t(r)||[];if("function"==typeof i)for(var o=0;o<s.length;o++){i(s[o].c,s[o].s,s[o].l)}},String.prototype.tagsearchTop=function(e,i){var r=new n(this.toString(),e)||[],s=new t(r)||[],o=this;if("function"==typeof i){var p="",h="",f=0;if(s.length>0){for(var u=0;u<s.length;u++)if(s[u]&&0==s[u].p){var l=this.substring(f,s[u].s);h=this.substring(s[u].e),f=s[u].e;var a=i(s[u].c,s[u].s,s[u].e,s[u].p)||"";p+=l+a}o=p+h}else o=this.toString()}return o}}(),function(){function n(n){this.jsptpl=n}function t(n,t){for(var e=t.split(".");e.length;){if(null==n)return!1;if(!(e[0]in n))return!1;n=n[e.shift()]}return n}function e(n,o){var p=n.tagsearchTop("c:forEach",function(n){var i=n.replace(r,function(n,i,r,s){var p,h=t(o,i),f="";for(p in h)if(h.hasOwnProperty(p)){var u={};u[r]=h[p],f+=e(s,u)}return f});return i});return p.replace(s,function(n,t,e,i){return console.log("替换，",e),console.log("inner，",i),""}).replace(i,function(n,e){var i=t(o,e);return i||0===i?i:""})}var i=/\$\{(.+?)\}/g,r=/<[c|t]:forEach[\s]*items=["|']\$\{(.+?)\}.*[\s]+?var=["|'](.+?)["|'].*>([\s\S]*)<\/[c|t]:forEach>/g,s=/<[c|t]:if\s+test=\s*(["|'])\$\{(.+?=?.+)\}\1+?>([\s\S]+?)<\/[c|t]:if>/g;n.prototype.render=function(n){return e(this.jsptpl,n)},window.jsptpl=n}();