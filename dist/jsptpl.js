!function(){var e=function(e,r){var t=[],n=0,s=function(){};s.prototype={c:"",po:0,pnode:null,findEnd:function(e){var a=e.indexOf("<"+r),i=e.indexOf("</"+r),p=e.indexOf("<"+r,e.indexOf("<"+r)+1),o=e.indexOf("</"+r,e.indexOf("</"+r)+1),l=new s;if(a>=0&&i>a){if(null!=this.pnode&&a>0){var h=e.substring(0,a);this.pnode.append(h)}if(p>0&&i>p){var g=e.substring(a,p),f=e.substring(p);l.pnode=this,l.po=this.po+1,this.s=n+a,n+=p,this.append(g),l.findEnd(f)}else{var g=e.substring(a,i+r.length+3),f=e.substring(i+r.length+3);this.s=n+a,n+=i+r.length+3,this.e=n,this.append(g),null!=this.pnode&&(l.pnode=this.pnode,l.po=this.po);var u={p:this.po,c:this.c,s:this.s,e:this.e};t.push(u),l.findEnd(f)}}else if(i>=0&&0>a||a>i){var g=e.substring(0,i+r.length+3),f=e.substring(i+r.length+3);n+=i+r.length+3,this.append(g),this.pnode.e=n;var u={p:this.pnode.po,c:this.pnode.c,e:this.pnode.e,s:this.pnode.s};t.push(u),o>0&&(a>o||0>a)?null!=this.pnode&&this.pnode.findEnd(f):a>0&&(0>o||o>a)&&null!=this.pnode&&(l.pnode=this.pnode.pnode,l.po=this.pnode.po,this.pnode=l,l.findEnd(f))}return""},append:function(e){this.c=this.c+e,null!=this.pnode&&this.pnode.append(e)}};var a=new s;a.findEnd(e);for(var i=0;i<t.length;i++);return t},r=function(e){function r(e,a,i){var p=t(e,a,i);if(n.push(e[p]),p>a&&s.push(p),p>a)r(e,a,p);else{for(1>=i-a?(a=s[s.length-1]+1,s.pop(),i=s[s.length-1]):a+=1;a>=i;)a=i+1,s.pop(),i=s[s.length-1];0!=s.length&&r(e,a,i)}}function t(e,r,t){if(null==e[r])return 0;for(var n=e[r].p,s=r,a=r;t>a;a++)e[a].p<n&&(n=e[a].p,s=a);return s}if(null==e||0==e.length)return[];var n=[],s=[];return s.push(e.length),r(e,0,e.length),n};String.prototype.tagsearcha=function(t,n){var s=e(this,t)||[],a=r(s)||[];if("function"==typeof n)for(var i=0;i<a.length;i++){n(a[i].c,a[i].s,a[i].l)}},String.prototype.tagsearchTop=function(t,n){var s=new e(this.toString(),t)||[],a=new r(s)||[],i=this;if("function"==typeof n){var p="",o="",l=0;if(a.length>0){for(var h=0;h<a.length;h++)if(a[h]&&0==a[h].p){var g=this.substring(l,a[h].s);o=this.substring(a[h].e),l=a[h].e;var f=n(a[h].c,a[h].s,a[h].e,a[h].p)||"";p+=g+f}i=p+o}else i=this.toString()}return i}}(),function(){function jsptpl(e){this.jsptpl=e}function get_value(e,r){var t=r.split(".");for(console.log(e,r);t.length;){if(null==e)return!1;if(!(t[0]in e))return!1;e=e[t.shift()]}return e}function getExpress_value(vars,express){var spreg=/(.*?)(==|>=|<=|>|<)(.*)/g,reg=/^[\d]+$|(?=(['"]).*?\1|true|false)/g,array=[],cond;express.replace(spreg,function(e,r,t,n){array.push(r),array.push(n),cond=t});var ret=!1;if(array.length>1){if(array[0]=reg.test(array[0])?array[0].replace(/['"]/g,""):get_value(vars,array[0]),array[1]=reg.test(array[1])?array[1].replace(/['"]/g,""):get_value(vars,array[1]),null!=cond)try{ret="=="==cond?array[0]==array[1]:eval("("+array[0]+cond+array[1]+")")}catch(e){ret=!1}}else ret=get_value(vars,express);return ret}function render(fragment,vars){var tagret=fragment.tagsearchTop("c:forEach",function(e){var r=e.replace(taglib_each_reg,function(e,r,t,n){var s,a=get_value(vars,r),i="";for(s in a)if(a.hasOwnProperty(s)){var p={};console.log(s,"sdfsdf"),p[t]=a[s],i+=render(n,p)}return i});return r});return tagret.replace(taglib_if_reg,function(allstr,_,express,inner){for(var check=!1,a1=express.split("&&"),i=0;i<a1.length;i++){var item=a1[i],a2=item.split("||");if(a2.length>1){for(var j=0;j<a2.length;j++)a2[j]=getExpress_value(vars,a2[j]);a1[i]=a2.join("||")}else a1[i]=getExpress_value(vars,a2[0])}var ret_express=a1.join("&&");try{check=eval("("+ret_express+")")}catch(e){check=!1}return check?render(inner,vars):""}).replace(taglib_jsp_reg,function(e,r){var t=get_value(vars,r);return t||0===t?t:""})}var taglib_jsp_reg=/\$\{(.+?)\}/g,taglib_each_reg=/<[c|t]:forEach[\s]*items=["|']\$\{(.+?)\}.*?[\s]+?var=["|'](.+?)["|'].*?>([\s\S]*)<\/[c|t]:forEach>/g,taglib_if_reg=/<[c|t]:if\s+test=\s*(["|'])\$\{(.+?=?.+)\}\1+?>([\s\S]+?)<\/[c|t]:if>/g;jsptpl.prototype.render=function(e){return render(this.jsptpl,e)},window.jsptpl=jsptpl}();